<div class="address-container form-element "
     [id]="identifier" [ngClass]="{invalid: (invalid)}">

    <form #groupForm="ngForm">
        <div fxLayout="column" fxFlex>
            <div fxLayout="row" fxLayoutGap="20px" fxFlex>
                <div fxFlex fxLayout="row" fxLayoutGap="5px">
                    <app-form-select
                        [name]="name + '[typeId]'"
                        [(ngModel)]="address.typeId"
                        [placeholder]="'LNG_ADDRESS_FIELD_LABEL_TYPE' | translate"
                        [disabled]="disabled"
                        [required]="required"
                        [options]="addressTypes$ | async"
                        (optionChanged)="onChange()">
                    </app-form-select>
                    <div
                        *ngIf="displayCopyField"
                        fxFlex="40px"
                        fxLayout="column"
                        fxLayoutAlign="center">
                        <button
                            class="copy-field-button"
                            type="button"
                            mat-icon-button
                            [title]="displayCopyFieldDescription"
                            (click)="triggerCopyValue('name')">
                            <span class="xt-icon">fileCopy</span>
                        </button>
                    </div>
                </div>

                <div fxFlex fxLayout="row" fxLayoutGap="5px">
                    <app-form-datepicker
                        [name]="name + '[date]'"
                        [(ngModel)]="address.date"
                        [required]="required"
                        [placeholder]="'LNG_ADDRESS_FIELD_LABEL_DATE' | translate"
                        [maxDate]="serverToday"
                        app-date-validator
                        [dateSameOrBefore]="serverToday"
                        (optionChanged)="onChange()">
                    </app-form-datepicker>
                    <div
                        *ngIf="displayCopyField"
                        fxFlex="40px"
                        fxLayout="column"
                        fxLayoutAlign="center">
                        <button
                            class="copy-field-button"
                            type="button"
                            mat-icon-button
                            [title]="displayCopyFieldDescription"
                            (click)="triggerCopyValue('date')">
                            <span class="xt-icon">fileCopy</span>
                        </button>
                    </div>
                </div>

                <div fxFlex><!-- placeholder --></div>
                <div fxFlex><!-- placeholder --></div>
            </div>

            <div fxLayout="row" fxLayoutGap="20px" fxFlex>
                <div fxFlex fxLayout="row" fxLayoutGap="5px">
                    <app-form-location-dropdown
                        fxFlex
                        [name]="name + '[locationId]'"
                        [(ngModel)]="address.locationId"
                        [placeholder]="'LNG_ADDRESS_FIELD_LABEL_LOCATION' | translate"
                        [disabled]="disabled"
                        [required]="required"
                        (changed)="onChange()">
                    </app-form-location-dropdown>
                    <div
                        *ngIf="displayCopyField"
                        fxFlex="40px"
                        fxLayout="column"
                        fxLayoutAlign="center">
                        <button
                            class="copy-field-button"
                            type="button"
                            mat-icon-button
                            [title]="displayCopyFieldDescription"
                            (click)="triggerCopyValue('locationId')">
                            <span class="xt-icon">fileCopy</span>
                        </button>
                    </div>
                </div>
            </div>

            <div fxLayout="row" fxLayoutGap="20px" fxFlex>
                <div fxFlex="25%" fxLayout="row" fxLayoutGap="5px">
                    <app-form-input
                        [name]="name + '[city]'"
                        [(ngModel)]="address.city"
                        [placeholder]="'LNG_ADDRESS_FIELD_LABEL_CITY' | translate"
                        [disabled]="disabled"
                        [required]="required"
                        (input)="onChange()">
                    </app-form-input>
                    <div
                        *ngIf="displayCopyField"
                        fxFlex="40px"
                        fxLayout="column"
                        fxLayoutAlign="center">
                        <button
                            class="copy-field-button"
                            type="button"
                            mat-icon-button
                            [title]="displayCopyFieldDescription"
                            (click)="triggerCopyValue('city')">
                            <span class="xt-icon">fileCopy</span>
                        </button>
                    </div>
                </div>

                <div fxFlex="25%" fxLayout="row" fxLayoutGap="5px">
                    <app-form-input
                        [name]="name + '[postalCode]'"
                        [(ngModel)]="address.postalCode"
                        [placeholder]="'LNG_ADDRESS_FIELD_LABEL_POSTAL_CODE' | translate"
                        [disabled]="disabled"
                        [required]="required"
                        (input)="onChange()">
                    </app-form-input>
                    <div
                        *ngIf="displayCopyField"
                        fxFlex="40px"
                        fxLayout="column"
                        fxLayoutAlign="center">
                        <button
                            class="copy-field-button"
                            type="button"
                            mat-icon-button
                            [title]="displayCopyFieldDescription"
                            (click)="triggerCopyValue('postalCode')">
                            <span class="xt-icon">fileCopy</span>
                        </button>
                    </div>
                </div>

                <div fxFlex="50%" fxLayout="row" fxLayoutGap="5px">
                    <app-form-input
                        [name]="name + '[addressLine1]'"
                        [(ngModel)]="address.addressLine1"
                        [placeholder]="'LNG_ADDRESS_FIELD_LABEL_ADDRESS_LINE_1' | translate"
                        [disabled]="disabled"
                        [required]="required"
                        (input)="onChange()">
                    </app-form-input>
                    <div
                        *ngIf="displayCopyField"
                        fxFlex="40px"
                        fxLayout="column"
                        fxLayoutAlign="center">
                        <button
                            class="copy-field-button"
                            type="button"
                            mat-icon-button
                            [title]="displayCopyFieldDescription"
                            (click)="triggerCopyValue('addressLine1')">
                            <span class="xt-icon">fileCopy</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
