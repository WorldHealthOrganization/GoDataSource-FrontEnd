<div class="address-list-container form-element"
     [id]="identifier" [ngClass]="{invalid: (invalid)}">

    <!-- Edit Mode -->
    <form
        *ngIf="!disabled"
        #groupForm="ngForm"
        fxLayout="column"
    >
        <div *ngFor="let address of values; let i = index; trackBy: trackByIndex"
             fxLayout="row" fxLayoutAlign="start center"
        >
            <mat-card class="page-section" fxFlex fxLayout="row" fxLayoutAlign="space-between center">
                <app-form-address
                    [name]="name + '[' + i + ']'"
                    [ngModel]="values[i]"
                    (changed)="onChange(false)"
                    [required]="required"
                    [disabled]="disabled"
                    (groupValidated)="validateGroup()"
                    [componentTitle]="'LNG_ENTITY_FIELD_LABEL_ADDRESS' | translate">
                </app-form-address>
            </mat-card>

            <div fxLayout="column" fxLayoutAlign="center center">
                <div>
                    <button *ngIf="sourceAddress"
                            type="button"
                            mat-icon-button
                            (click)="copy(i, sourceAddress)"
                            [matTooltip]="'LNG_ADDRESS_TOOLTIP_COPY_ADDRESS' | translate">
                        <span class="xt-icon">fileCopy</span>
                    </button>
                </div>
                <div>
                    <button type="button" mat-icon-button (click)="delete(i)">
                        <span class="xt-icon">delete</span>
                    </button>
                </div>
            </div>
        </div>

        <div fxLayout="row">
            <button class="margin-bottom" type="button" mat-button color="primary" (click)="add()">{{ 'LNG_ADDRESS_LABEL_ADD_NEW_ADDRESS' | translate }}</button>
        </div>
    </form>
    <!-- End of Edit Mode -->

    <!-- View Only Mode -->
    <div fxLayout="column" *ngIf="disabled">
        <ng-container *ngIf="values && values.length > 0; else noAddresses">
            <div
                *ngFor="let address of values; let i = index"
                fxLayout="row" fxLayoutAlign="start center"
            >
                <mat-card class="page-section" fxFlex fxLayout="row" fxLayoutAlign="space-between center">
                    <app-form-address
                        [name]="name + '[' + i + ']'"
                        [ngModel]="values[i]"
                        [disabled]="disabled">
                    </app-form-address>
                </mat-card>
            </div>
        </ng-container>
        <ng-template #noAddresses>
            {{ 'LNG_ADDRESS_LABEL_NO_ADDRESSES' | translate }}
        </ng-template>
    </div>
    <!-- End of View Only Mode -->
</div>
