<div
    class="dialog-main app-theme"
    fxLayout="column"
>
    <div
        class="dialog-main-msg"
        [innerHTML]="confirmData?.message | translate:confirmData?.translateData">
    </div>

    <div
        *ngIf="confirmData?.additionalInfo"
        class="dialog-additional-info"
        [innerHTML]="confirmData?.additionalInfo| translate:confirmData?.translateData">
    </div>

    <form #form="ngForm" fxLayout="column">
        <div
            *ngIf="confirmData?.customInput"
            fxLayout="column"
        >
            <!-- Single input -->
            <ng-container *ngIf="!confirmData?.fieldsList || confirmData?.fieldsList.length < 1">
                <ng-container *ngIf="confirmData?.customInputOptions">
                    <div fxLayout="row">
                        <app-form-select
                            name="value"
                            [(ngModel)]="dialogAnswerInputValue.value"
                            [placeholder]="confirmData.placeholder | translate:confirmData?.translateData"
                            [options]="confirmData.customInputOptions"
                            optionLabelKey="label"
                            optionValueKey="value"
                            [multiple]="confirmData.customInputOptionsMultiple"
                            [required]="confirmData.required">
                        </app-form-select>
                    </div>
                </ng-container>
                <ng-container *ngIf="!confirmData?.customInputOptions">
                    <div fxLayout="row">
                        <app-form-input
                            name="value"
                            [(ngModel)]="dialogAnswerInputValue.value"
                            [placeholder]="confirmData.placeholder | translate:confirmData?.translateData"
                            [required]="confirmData.required"
                            type="number">
                        </app-form-input>
                    </div>
                </ng-container>
            </ng-container>

            <!-- Multiple inputs -->
            <ng-container *ngIf="confirmData?.fieldsList?.length > 0">
                <ng-container
                    *ngFor="let field of confirmData.fieldsList">
                    <div
                        *ngIf="field.isVisible(dialogAnswerInputValue.value)"
                        fxLayout="column" fxLayoutGap="20px">

                        <div fxLayout="row">
                            <!-- Select -->
                            <app-form-select
                                *ngIf="field.fieldType === DialogFieldType.SELECT"
                                [name]="field.name"
                                [(ngModel)]="dialogAnswerInputValue.value[field.name]"
                                [placeholder]="field.placeholder | translate:confirmData?.translateData"
                                [tooltip]="field.description"
                                [options]="field.inputOptions"
                                [clearable]="field.inputOptionsClearable"
                                optionLabelKey="label"
                                optionValueKey="value"
                                [multiple]="field.inputOptionsMultiple"
                                [required]="field.required"
                                [disabled]="field.disabled">
                            </app-form-select>
                        </div>

                        <div fxLayout="row">
                            <!-- Text -->
                            <app-form-input
                                *ngIf="field.fieldType === DialogFieldType.TEXT && field.type !== 'number'"
                                [name]="field.name"
                                [(ngModel)]="dialogAnswerInputValue.value[field.name]"
                                [placeholder]="field.placeholder | translate:confirmData?.translateData"
                                [tooltip]="field.description"
                                [required]="field.required"
                                [type]="field.type"
                                [disabled]="field.disabled">
                            </app-form-input>
                        </div>

                        <div fxLayout="row">
                            <!-- Number -->
                            <app-form-input
                                *ngIf="field.fieldType === DialogFieldType.TEXT && field.type === 'number'"
                                [name]="field.name"
                                [(ngModel)]="dialogAnswerInputValue.value[field.name]"
                                [placeholder]="field.placeholder | translate:confirmData?.translateData"
                                [tooltip]="field.description"
                                [required]="field.required"
                                type="number"
                                [disabled]="field.disabled"
                                app-min-max-validator
                                [min]="field.min"
                                [minNumber]="field.min"
                                [max]="field.max"
                                [maxNumber]="field.max">
                            </app-form-input>
                        </div>

                        <div fxLayout="row">
                            <!-- Boolean -->
                            <app-form-slide-toggle
                                *ngIf="field.fieldType === DialogFieldType.BOOLEAN"
                                [name]="field.name"
                                [(ngModel)]="dialogAnswerInputValue.value[field.name]"
                                [label]="field.placeholder | translate:confirmData?.translateData"
                                [tooltip]="field.description"
                                [disabled]="field.disabled">
                            </app-form-slide-toggle>
                        </div>

                        <div fxLayout="row">
                            <!-- Date -->
                            <app-form-datepicker
                                *ngIf="field.fieldType === DialogFieldType.DATE"
                                [name]="field.name"
                                [ngModel]="dialogAnswerInputValue.value[field.name]"
                                [placeholder]="field.placeholder | translate:confirmData?.translateData"
                                [tooltip]="field.description"
                                [required]="field.required"
                                [disabled]="field.disabled"
                                (optionChanged)="setDateValue(field.name, $event)"
                                app-date-validator
                            ></app-form-datepicker>
                        </div>

                        <div fxLayout="row">
                            <!-- Date range -->
                            <app-form-daterange
                                *ngIf="field.fieldType === DialogFieldType.DATE_RANGE"
                                [name]="field.name"
                                [(ngModel)]="dialogAnswerInputValue.value[field.name]"
                                [required]="field.required"
                                [disabled]="field.disabled">
                            </app-form-daterange>
                        </div>

                        <!-- Link -->
                        <a
                            *ngIf="field.fieldType === DialogFieldType.LINK"
                            [routerLink]="field.routerLink"
                            [queryParams]="field.queryParams"
                            [target]="field.linkTarget">
                            {{ field.placeholder | translate }}
                        </a>

                        <div fxLayout="row">
                            <!-- Url -->
                            <app-form-input
                                *ngIf="field.fieldType === DialogFieldType.URL"
                                [name]="field.name"
                                [(ngModel)]="dialogAnswerInputValue.value[field.name]"
                                [placeholder]="field.placeholder | translate:confirmData?.translateData"
                                [tooltip]="field.description"
                                [required]="field.required"
                                [disabled]="field.disabled"
                                app-general-async-validator
                                [asyncValidatorObservable]="field.urlAsyncValidator(dialogAnswerInputValue.value[field.name])"
                                [asyncValidatorErrMsg]="field.urlAsyncErrorMsg"
                                [asyncValidatorErrMsgTranslateData]="field.urlAsyncErrorMsgData">
                            </app-form-input>
                        </div>
                    </div>
                </ng-container>
            </ng-container>
        </div>

        <div fxLayout="row" fxLayoutAlign="end">
            <button
                *ngFor="let dialogButton of confirmData?.buttons"
                mat-button
                type="button"
                class="dialog-button"
                [ngClass]="dialogButton.cssClass"
                (click)="dialogButton.clickCallback(dialogRef, dialogAnswerInputValue)"
                [disabled]="dialogButton.disabled()">
                {{ dialogButton.label | translate:confirmData?.translateData }}
            </button>
        </div>
    </form>

</div>
