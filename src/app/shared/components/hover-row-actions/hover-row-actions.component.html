<!-- Hover row -->
<div
    class="record-hover-row-effect"
    [class.visible]="visible"
    [ngStyle]="hoverRowStyle">
</div>

<!-- Hover actions -->
<div
    #actionsRow
    [class.partial-visible]="visible && !visibleActions"
    [class.full-visible]="visible && visibleActions"
    [class.right]="realPosition === HoverRowActionsPosition.RIGHT"
    [ngClass]="rowClasses"
    [ngStyle]="hoverActionsStyle"
    (mouseenter)="actionsMouseEnter()"
    (mouseleave)="actionsMouseLeave()"
>
    <ng-container
        *ngFor="let buttonData of realActions">
        <!-- Icon button -->
        <ng-container
            *ngIf="buttonData.type === HoverRowActionType.BUTTON">

            <!-- Link -->
            <a
                *ngIf="buttonData.routerLink && !buttonData.isDisabled; else simpleButton"
                [routerLink]="buttonData.routerLink"
                [queryParams]="buttonData.queryParams">
                <button
                  mat-icon-button
                  color="accent"
                  type="button"
                  [ngClass]="buttonData.class"
                  (click)="clickedButton(buttonData, $event)"
                  [matTooltip]="buttonData.iconTooltip | translate:buttonData.iconTooltipTranslateData ? buttonData.iconTooltipTranslateData(actionData) : null">
                  <mat-icon>{{ buttonData.icon }}</mat-icon>
                </button>
            </a>

            <!-- Simple button -->
            <ng-template
                #simpleButton>
                <span
                    [matTooltip]="buttonData.disabledTooltip | translate">
                    <button
                      mat-icon-button
                      color="primary"
                      type="button"
                      [ngClass]="buttonData.class"
                      (click)="clickedButton(buttonData)"
                      [matTooltip]="buttonData.iconTooltip | translate:buttonData.iconTooltipTranslateData ? buttonData.iconTooltipTranslateData(actionData) : null"
                      [disabled]="buttonData.isDisabled">
                      <mat-icon>{{ buttonData.icon }}</mat-icon>
                    </button>
                </span>
            </ng-template>
        </ng-container>


        <!-- Menu -->
        <ng-container
            *ngIf="buttonData.type === HoverRowActionType.MENU && buttonData.menuOptions">
            <button
              mat-icon-button
              color="accent"
              type="button"
              [ngClass]="buttonData.class"
              [matMenuTriggerFor]="actionsMenu">
              <mat-icon>{{ buttonData.icon }}</mat-icon>
            </button>

            <mat-menu
                #actionsMenu="matMenu"
                class="table-max-sized-menu">

                <!-- Menu Options -->
                <ng-container
                    *ngFor="let menuOptionData of buttonData.menuOptions; let isFirst = first; let isLast = last">
                    <!-- Menu Button -->
                    <button
                        *ngIf="menuOptionData.type === HoverRowActionType.BUTTON"
                        mat-menu-item
                        type="button"
                        [ngClass]="menuOptionData.class"
                        (click)="clickedButton(menuOptionData)"
                        [disabled]="menuOptionData.isDisabled">
                        {{ menuOptionData.menuOptionLabel | translate:menuOptionData.menuOptionLabelTranslateData ? menuOptionData.menuOptionLabelTranslateData(actionData) : null }}
                    </button>

                    <!-- Menu Divider -->
                    <mat-divider
                        *ngIf="!isFirst && !isLast && menuOptionData.type === HoverRowActionType.DIVIDER"
                        [ngClass]="menuOptionData.class">
                    </mat-divider>
                </ng-container>
            </mat-menu>
        </ng-container>
    </ng-container>
</div>
