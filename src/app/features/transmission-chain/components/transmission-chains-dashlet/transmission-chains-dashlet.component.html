<div class="chain-settings">
    <!-- settings toggle -->
    <button
        mat-raised-button
        (click)="toggleSettings()">
        <span class="xt-icon">settings</span>
    </button>
    <!-- settings panel -->
    <div *ngIf="showSettings"
         class="settings-container">
        <div fxLayout="row" fxLayoutGap="10px">
            <!-- entity type filter - events -->
            <app-form-checkbox
                fxFlex="150px"
                name="showEvents"
                label="Show Events"
                [(ngModel)]="filters.showEvents">
            </app-form-checkbox>
            <!-- entity type filter - contacts -->
            <app-form-checkbox
                fxFlex="150px"
                name="showContacts"
                label="Show Contacts"
                [(ngModel)]="filters.showContacts">
            </app-form-checkbox>
        </div>

        <div fxLayout="row" fxLayoutGap="10px">
            <!-- case classification -->
            <app-form-select
                fxFlex="20"
                name="classification"
                [(ngModel)]="filters.classification"
                [placeholder]="'LNG_CASE_FIELD_LABEL_CLASSIFICATION' | translate"
                [options]="caseClassificationsList$ | async">
            </app-form-select>
            <!-- occupation -->
            <app-form-select
                fxFlex="20"
                name="occupation"
                [(ngModel)]="filters.occupation"
                [placeholder]="'LNG_CONTACT_FIELD_LABEL_OCCUPATION' | translate"
                [options]="occupationsList$ | async">
            </app-form-select>
            <!-- gender -->
            <app-form-select
                fxFlex="10"
                name="gender"
                [(ngModel)]="filters.gender"
                [placeholder]="'LNG_CASE_FIELD_LABEL_GENDER' | translate"
                [options]="genderList$ | async"
                multiple="true">
            </app-form-select>
            <!-- first name -->
            <app-form-input
                fxFlex="20"
                name="firstName"
                [(ngModel)]="filters.firstName"
                [placeholder]="'LNG_CONTACT_FIELD_LABEL_FIRST_NAME' | translate"
                maxlength="100">
            </app-form-input>
            <!-- last name -->
            <app-form-input
                fxFlex="20"
                name="lastName"
                [(ngModel)]="filters.lastName"
                [placeholder]="'LNG_CONTACT_FIELD_LABEL_LAST_NAME' | translate"
                maxlength="100">
            </app-form-input>
        </div>

        <div fxFlex="30">
            <div>Age:</div>
            <!-- age -->
            <app-form-range
                name="age"
                [ngModel]="filters.age"
                (changed)="setAgeFilter($event)">
            </app-form-range>
        </div>

        <div fxFlex="30">
            <div>Date</div>
            <!-- Date -->
            <app-form-daterange
                name="date"
                [ngModel]="filters.date"
                (changed)="setDateFilter($event)">
            </app-form-daterange>
        </div>

        <div fxLayout="row" fxLayoutGap="10px" fxFlex="30">
            <!-- location -->
            <app-form-location-dropdown
                fxFlex
                name="locationId"
                [(ngModel)]="filters.locationId"
                [placeholder]="'LNG_ADDRESS_FIELD_LABEL_LOCATION' | translate">
            </app-form-location-dropdown>

        </div>

        <!-- color coding -->
        <div>
            {{'LNG_PAGE_GRAPH_CHAINS_OF_TRANSMISSION_NODE_COLOR_TITLE' | translate}}
        </div>
        <app-form-radio
            name="nodeColorCriteria"
            [(ngModel)]="colorCriteria.nodeColorCriteria"
            [options]="nodeColorCriteriaOptions$ | async">
        </app-form-radio>

        <div>
            {{'LNG_PAGE_GRAPH_CHAINS_OF_TRANSMISSION_NODE_NAME_COLOR_TITLE' | translate}}
        </div>
        <app-form-radio
            name="nodeNameColorCriteria"
            [(ngModel)]="colorCriteria.nodeNameColorCriteria"
            [options]="nodeColorCriteriaOptions$ | async"
            [disabled]="selectedViewType === Constants.TRANSMISSION_CHAIN_VIEW_TYPES.TIMELINE_NETWORK.value"
            [tooltip]="tooltipViewTimeline() | translate">
        </app-form-radio>

        <div>
            {{'LNG_PAGE_GRAPH_CHAINS_OF_TRANSMISSION_EDGE_COLOR_TITLE' | translate}}
        </div>
        <app-form-radio
            name="edgeColorCriteria"
            [(ngModel)]="colorCriteria.edgeColorCriteria"
            [options]="edgeColorCriteriaOptions$ | async">
        </app-form-radio>

        <!-- node icon -->
        <div>
            {{'LNG_PAGE_GRAPH_CHAINS_OF_TRANSMISSION_NODE_ICON_TITLE' | translate}}
        </div>
        <app-form-radio
            name="nodeIconCriteria"
            [(ngModel)]="colorCriteria.nodeIconCriteria"
            [options]="nodeIconCriteriaOptions$ | async">
        </app-form-radio>

        <div>
            {{'LNG_PAGE_GRAPH_CHAINS_OF_TRANSMISSION_NODE_LABEL_TITLE' | translate}}
        </div>
        <app-form-radio
            name="nodeLabelCriteria"
            [(ngModel)]="colorCriteria.nodeLabelCriteria"
            [options]="nodeLabelCriteriaOptions$ | async">
        </app-form-radio>

        <div>
            <button mat-raised-button (click)="refreshChain()">
                {{ 'LNG_COMMON_BUTTON_REFRESH_LIST' | translate }}
            </button>
        </div>
    </div>
</div>

<!-- cytoscape element -->
<app-cytoscape-graph
    [elements]="graphElements"
    [transmissionChainViewType]="selectedViewType"
    [legend]="legend"
    (nodeTapped)="onNodeTap($event)"
    (edgeTapped)="onEdgeTap($event)"
    (viewTypeChanged)="viewTypeChanged($event)">
</app-cytoscape-graph>
<div *ngIf="sizeOfChainsFilter">
    <div>
        {{'LNG_PAGE_GRAPH_CHAINS_OF_TRANSMISSION_CHAINS_FILTERED_BY_SIZE' | translate}} {{sizeOfChainsFilter}}
    </div>
    <button mat-raised-button (click)="resetChain()">
        {{ 'LNG_PAGE_GRAPH_CHAINS_OF_TRANSMISSION_RESET_CHAINS' | translate }}
    </button>
</div>
<div *ngIf="personId">
    <div>
        {{'LNG_PAGE_GRAPH_CHAINS_OF_TRANSMISSION_CHAINS_FILTERED_BY_PERSON' | translate}} {{personName}}
    </div>
    <button mat-raised-button (click)="resetChain()">
        {{ 'LNG_PAGE_GRAPH_CHAINS_OF_TRANSMISSION_RESET_CHAINS' | translate }}
    </button>
</div>
